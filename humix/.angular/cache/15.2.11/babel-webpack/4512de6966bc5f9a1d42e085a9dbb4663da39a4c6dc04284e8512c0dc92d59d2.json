{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/iot.service\";\nimport * as i2 from \"@angular/forms\";\nexport let ControlComponent = /*#__PURE__*/(() => {\n  class ControlComponent {\n    constructor(iot) {\n      this.iot = iot;\n      this.deshumidificador = false;\n      this.loading = false; // ⚡ para bloquear el switch mientras se envía\n    }\n\n    toggleDeshumidificador() {\n      if (this.loading) return; // evita doble click\n      this.loading = true;\n      const accion = this.deshumidificador ? 'on' : 'off';\n      this.iot.setDeshumidificador(accion).subscribe({\n        next: res => {\n          console.log('Comando enviado correctamente:', res);\n          alert('Comando enviado correctamente');\n          this.loading = false; // liberar el switch\n        },\n\n        error: err => {\n          console.error('Error al enviar comando:', err);\n          alert('No se pudo enviar el comando al deshumidificador');\n          this.deshumidificador = !this.deshumidificador; // revertir estado\n          this.loading = false; // liberar el switch\n        }\n      });\n    }\n\n    static {\n      this.ɵfac = function ControlComponent_Factory(t) {\n        return new (t || ControlComponent)(i0.ɵɵdirectiveInject(i1.IotService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ControlComponent,\n        selectors: [[\"app-control\"]],\n        decls: 22,\n        vars: 10,\n        consts: [[1, \"titulo-wrapper\"], [1, \"panel-dispositivos\"], [1, \"dispositivo\"], [1, \"icon\"], [1, \"nombre\"], [\"type\", \"checkbox\", \"disabled\", \"\", 3, \"checked\"], [\"type\", \"checkbox\", 3, \"ngModel\", \"disabled\", \"ngModelChange\", \"change\"]],\n        template: function ControlComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n            i0.ɵɵtext(2, \"Control\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"span\", 3);\n            i0.ɵɵtext(6, \"\\uD83D\\uDCA8\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"span\", 4);\n            i0.ɵɵtext(8, \"Ventilador\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(9, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 2)(11, \"span\", 3);\n            i0.ɵɵtext(12, \"\\uD83D\\uDCA1\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"span\", 4);\n            i0.ɵɵtext(14, \"Luz\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"div\", 2)(17, \"span\", 3);\n            i0.ɵɵtext(18, \"\\uD83D\\uDCA7\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"span\", 4);\n            i0.ɵɵtext(20, \"Deshumidificador\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(21, \"input\", 6);\n            i0.ɵɵlistener(\"ngModelChange\", function ControlComponent_Template_input_ngModelChange_21_listener($event) {\n              return ctx.deshumidificador = $event;\n            })(\"change\", function ControlComponent_Template_input_change_21_listener() {\n              return ctx.toggleDeshumidificador();\n            });\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵclassProp(\"on\", false);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"checked\", false);\n            i0.ɵɵadvance(1);\n            i0.ɵɵclassProp(\"on\", false);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"checked\", false);\n            i0.ɵɵadvance(1);\n            i0.ɵɵclassProp(\"on\", ctx.deshumidificador);\n            i0.ɵɵadvance(5);\n            i0.ɵɵproperty(\"ngModel\", ctx.deshumidificador)(\"disabled\", ctx.loading);\n          }\n        },\n        dependencies: [i2.CheckboxControlValueAccessor, i2.NgControlStatus, i2.NgModel],\n        styles: [\".panel-dispositivos[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px;padding:20px;max-width:300px;background-color:#93a3f3;border-radius:12px;box-shadow:0 5px 10px #0000001a}.dispositivo[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 15px;background-color:#fff;border-radius:10px;box-shadow:0 2px 5px #0000000d;transition:all .3s ease}.dispositivo[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 10px #0000001a}.dispositivo.on[_ngcontent-%COMP%]{background-color:#e3f2fd}.icon[_ngcontent-%COMP%]{font-size:1.5rem;margin-right:10px}.nombre[_ngcontent-%COMP%]{flex:1;font-weight:600;color:#333}input[type=checkbox][_ngcontent-%COMP%]{width:20px;height:20px;accent-color:#2196f3;cursor:pointer}.frame[_ngcontent-%COMP%]{background-color:#93a3f3;padding:16px;border-radius:12px;box-shadow:0 4px 12px #00000026;margin:16px 0}.frame-content[_ngcontent-%COMP%]{background-color:#fff;padding:14px 16px;border-radius:8px;color:#333}.frame-title[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;color:#fff;margin-bottom:10px}.titulo-wrapper[_ngcontent-%COMP%]{padding:14px 20px;border-radius:12px;text-align:center;box-shadow:0 3px 10px #00000026;margin-bottom:16px}.titulo-wrapper[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:#fff;font-size:1.8rem;font-weight:600;letter-spacing:.5px}\"]\n      });\n    }\n  }\n  return ControlComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}