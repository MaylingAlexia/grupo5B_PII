{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/ia.service\";\nimport * as i2 from \"src/app/services/gravedad.service\";\nimport * as i3 from \"@angular/common\";\nfunction RecomendacionesComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"p\")(2, \"strong\");\n    i0.ɵɵtext(3, \"Gravedad:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\")(7, \"strong\");\n    i0.ɵɵtext(8, \"Score:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 2, ctx_r0.gravedad), \"\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.score, \"\");\n  }\n}\nfunction RecomendacionesComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Cargando evaluaci\\u00F3n de humedad...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RecomendacionesComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"h3\");\n    i0.ɵɵtext(2, \"Plan de acci\\u00F3n recomendado:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r3.respuesta);\n  }\n}\nfunction RecomendacionesComponent_ng_template_7_p_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Generando recomendaci\\u00F3n de la IA...\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RecomendacionesComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, RecomendacionesComponent_ng_template_7_p_0_Template, 2, 0, \"p\", 8);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.gravedad);\n  }\n}\nexport class RecomendacionesComponent {\n  constructor(ia, gravedadService) {\n    this.ia = ia;\n    this.gravedadService = gravedadService;\n    this.mensaje = '';\n    this.respuesta = '';\n    this.gravedad = '';\n    this.score = 0;\n  }\n  ngOnInit() {\n    // 1️⃣ Evaluar la gravedad\n    this.gravedadService.evaluarHumedad().subscribe(resultado => {\n      this.gravedad = resultado.gravedad;\n      this.score = resultado.score;\n      // 2️⃣ Construir mensaje dinámicamente según la gravedad\n      this.mensaje = `Tengo niveles de humedad ${this.gravedad} (score ${this.score}). ` + `Recomiéndame un plan de acción para mitigar la humedad en mi hogar, considerando medidas efectivas y fáciles de implementar.`;\n      // 3️⃣ Llamar a la IA\n      this.enviar();\n    });\n  }\n  enviar() {\n    this.ia.pedir(this.mensaje).subscribe(res => {\n      this.respuesta = res.answer;\n    });\n  }\n  static {\n    this.ɵfac = function RecomendacionesComponent_Factory(t) {\n      return new (t || RecomendacionesComponent)(i0.ɵɵdirectiveInject(i1.IaService), i0.ɵɵdirectiveInject(i2.GravedadService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RecomendacionesComponent,\n      selectors: [[\"app-recomendaciones\"]],\n      decls: 11,\n      vars: 5,\n      consts: [[1, \"recomendaciones-container\"], [\"class\", \"estado\", 4, \"ngIf\", \"ngIfElse\"], [\"cargandoEstado\", \"\"], [\"class\", \"respuesta\", 4, \"ngIf\", \"ngIfElse\"], [\"cargandoIA\", \"\"], [3, \"disabled\", \"click\"], [1, \"estado\"], [1, \"respuesta\"], [4, \"ngIf\"]],\n      template: function RecomendacionesComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n          i0.ɵɵtext(2, \"Recomendaciones de acci\\u00F3n\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(3, RecomendacionesComponent_div_3_Template, 10, 4, \"div\", 1);\n          i0.ɵɵtemplate(4, RecomendacionesComponent_ng_template_4_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵtemplate(6, RecomendacionesComponent_div_6_Template, 5, 1, \"div\", 3);\n          i0.ɵɵtemplate(7, RecomendacionesComponent_ng_template_7_Template, 1, 1, \"ng-template\", null, 4, i0.ɵɵtemplateRefExtractor);\n          i0.ɵɵelementStart(9, \"button\", 5);\n          i0.ɵɵlistener(\"click\", function RecomendacionesComponent_Template_button_click_9_listener() {\n            return ctx.enviar();\n          });\n          i0.ɵɵtext(10, \"Actualizar recomendaci\\u00F3n\");\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(5);\n          const _r4 = i0.ɵɵreference(8);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.gravedad)(\"ngIfElse\", _r1);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngIf\", ctx.respuesta)(\"ngIfElse\", _r4);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"disabled\", !ctx.gravedad);\n        }\n      },\n      dependencies: [i3.NgIf, i3.TitleCasePipe],\n      styles: [\".recomendaciones-container[_ngcontent-%COMP%] {\\r\\n  max-width: 600px;\\r\\n  margin: 1rem auto;\\r\\n  padding: 1rem;\\r\\n  border-radius: 8px;\\r\\n  box-shadow: 0 2px 6px rgba(0,0,0,0.1);\\r\\n  background: #fdfdfd;\\r\\n  font-family: Arial, sans-serif;\\r\\n}\\r\\n\\r\\n.estado[_ngcontent-%COMP%], .respuesta[_ngcontent-%COMP%] {\\r\\n  margin-bottom: 1rem;\\r\\n}\\r\\n\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  padding: 0.5rem 1rem;\\r\\n  background-color: #0077cc;\\r\\n  color: #fff;\\r\\n  border: none;\\r\\n  border-radius: 4px;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\nbutton[disabled][_ngcontent-%COMP%] {\\r\\n  background-color: #aaa;\\r\\n  cursor: not-allowed;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvcmVjb21lbmRhY2lvbmVzL3JlY29tZW5kYWNpb25lcy5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0VBQ2hCLGlCQUFpQjtFQUNqQixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLHFDQUFxQztFQUNyQyxtQkFBbUI7RUFDbkIsOEJBQThCO0FBQ2hDOztBQUVBO0VBQ0UsbUJBQW1CO0FBQ3JCOztBQUVBO0VBQ0Usb0JBQW9CO0VBQ3BCLHlCQUF5QjtFQUN6QixXQUFXO0VBQ1gsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0Usc0JBQXNCO0VBQ3RCLG1CQUFtQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi5yZWNvbWVuZGFjaW9uZXMtY29udGFpbmVyIHtcclxuICBtYXgtd2lkdGg6IDYwMHB4O1xyXG4gIG1hcmdpbjogMXJlbSBhdXRvO1xyXG4gIHBhZGRpbmc6IDFyZW07XHJcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xyXG4gIGJveC1zaGFkb3c6IDAgMnB4IDZweCByZ2JhKDAsMCwwLDAuMSk7XHJcbiAgYmFja2dyb3VuZDogI2ZkZmRmZDtcclxuICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7XHJcbn1cclxuXHJcbi5lc3RhZG8sIC5yZXNwdWVzdGEge1xyXG4gIG1hcmdpbi1ib3R0b206IDFyZW07XHJcbn1cclxuXHJcbmJ1dHRvbiB7XHJcbiAgcGFkZGluZzogMC41cmVtIDFyZW07XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzAwNzdjYztcclxuICBjb2xvcjogI2ZmZjtcclxuICBib3JkZXI6IG5vbmU7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuYnV0dG9uW2Rpc2FibGVkXSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogI2FhYTtcclxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":";;;;;;IAKEA,8BAA0D;IAC7CA,yBAAS;IAAAA,iBAAS;IAACA,YAA0B;;IAAAA,iBAAI;IAC5DA,yBAAG;IAAQA,sBAAM;IAAAA,iBAAS;IAACA,YAAW;IAAAA,iBAAI;;;;IADZA,eAA0B;IAA1BA,qEAA0B;IAC7BA,eAAW;IAAXA,4CAAW;;;;;IAGtCA,yBAAG;IAAAA,sDAAiC;IAAAA,iBAAI;;;;;IAI1CA,8BAA0D;IACpDA,gDAA2B;IAAAA,iBAAK;IACpCA,yBAAG;IAAAA,YAAe;IAAAA,iBAAI;;;;IAAnBA,eAAe;IAAfA,sCAAe;;;;;IAGlBA,yBAAoB;IAAAA,wDAAmC;IAAAA,iBAAI;;;;;IAA3DA,mFAA2D;;;;IAAvDA,sCAAc;;;ACVtB,OAAM,MAAOC,wBAAwB;EAOnCC,YACUC,EAAa,EACbC,eAAgC;IADhC,OAAE,GAAFD,EAAE;IACF,oBAAe,GAAfC,eAAe;IAPzB,YAAO,GAAG,EAAE;IACZ,cAAS,GAAG,EAAE;IACd,aAAQ,GAAW,EAAE;IACrB,UAAK,GAAW,CAAC;EAKd;EAEHC,QAAQ;IACN;IACA,IAAI,CAACD,eAAe,CAACE,cAAc,EAAE,CAACC,SAAS,CAACC,SAAS,IAAG;MAC1D,IAAI,CAACC,QAAQ,GAAGD,SAAS,CAACC,QAAQ;MAClC,IAAI,CAACC,KAAK,GAAGF,SAAS,CAACE,KAAK;MAE5B;MACA,IAAI,CAACC,OAAO,GAAG,4BAA4B,IAAI,CAACF,QAAQ,WAAW,IAAI,CAACC,KAAK,KAAK,GACnE,8HAA8H;MAE7I;MACA,IAAI,CAACE,MAAM,EAAE;IACf,CAAC,CAAC;EACJ;EAEAA,MAAM;IACJ,IAAI,CAACT,EAAE,CAACU,KAAK,CAAC,IAAI,CAACF,OAAO,CAAC,CAACJ,SAAS,CAACO,GAAG,IAAG;MAC1C,IAAI,CAACC,SAAS,GAAGD,GAAG,CAACE,MAAM;IAC7B,CAAC,CAAC;EACJ;;;uBA/BWf,wBAAwB;IAAA;EAAA;;;YAAxBA,wBAAwB;MAAAgB;MAAAC;MAAAC;MAAAC;MAAAC;QAAA;UDTrCrB,8BAAuC;UAEjCA,8CAAyB;UAAAA,iBAAK;UAGlCA,0EAGM;UACNA,0HAEc;UAGdA,yEAGM;UACNA,0HAEc;UAGdA,iCAAkD;UAA1CA;YAAA,OAASsB,YAAQ;UAAA,EAAC;UAAwBtB,8CAAwB;UAAAA,iBAAS;;;;;UAlB7EA,eAAgB;UAAhBA,mCAAgB;UAShBA,eAAiB;UAAjBA,oCAAiB;UASIA,eAAsB;UAAtBA,wCAAsB","names":["i0","RecomendacionesComponent","constructor","ia","gravedadService","ngOnInit","evaluarHumedad","subscribe","resultado","gravedad","score","mensaje","enviar","pedir","res","respuesta","answer","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\manav\\Desktop\\Lenguajes\\Python\\RaspberryPi\\humix\\src\\app\\pages\\recomendaciones\\recomendaciones.component.html","C:\\Users\\manav\\Desktop\\Lenguajes\\Python\\RaspberryPi\\humix\\src\\app\\pages\\recomendaciones\\recomendaciones.component.ts"],"sourcesContent":["<div class=\"recomendaciones-container\">\n\n  <h2>Recomendaciones de acción</h2>\n\n  <!-- Estado actual -->\n  <div *ngIf=\"gravedad; else cargandoEstado\" class=\"estado\">\n    <p><strong>Gravedad:</strong> {{ gravedad | titlecase }}</p>\n    <p><strong>Score:</strong> {{ score }}</p>\n  </div>\n  <ng-template #cargandoEstado>\n    <p>Cargando evaluación de humedad...</p>\n  </ng-template>\n\n  <!-- Mensaje de la IA -->\n  <div *ngIf=\"respuesta; else cargandoIA\" class=\"respuesta\">\n    <h3>Plan de acción recomendado:</h3>\n    <p>{{ respuesta }}</p>\n  </div>\n  <ng-template #cargandoIA>\n    <p *ngIf=\"gravedad\">Generando recomendación de la IA...</p>\n  </ng-template>\n\n  <!-- Botón para regenerar recomendación si quieres -->\n  <button (click)=\"enviar()\" [disabled]=\"!gravedad\">Actualizar recomendación</button>\n\n</div>","import { IaService } from 'src/app/services/ia.service';\nimport { Component, OnInit } from '@angular/core';\nimport { GravedadService } from 'src/app/services/gravedad.service';\n\n@Component({\n  selector: 'app-recomendaciones',\n  templateUrl: './recomendaciones.component.html',\n  styleUrls: ['./recomendaciones.component.css']\n})\nexport class RecomendacionesComponent implements OnInit {\n\n  mensaje = '';\n  respuesta = '';\n  gravedad: string = '';\n  score: number = 0;\n\n  constructor(\n    private ia: IaService,\n    private gravedadService: GravedadService\n  ) {}\n\n  ngOnInit() {\n    // 1️⃣ Evaluar la gravedad\n    this.gravedadService.evaluarHumedad().subscribe(resultado => {\n      this.gravedad = resultado.gravedad;\n      this.score = resultado.score;\n\n      // 2️⃣ Construir mensaje dinámicamente según la gravedad\n      this.mensaje = `Tengo niveles de humedad ${this.gravedad} (score ${this.score}). ` +\n                     `Recomiéndame un plan de acción para mitigar la humedad en mi hogar, considerando medidas efectivas y fáciles de implementar.`;\n\n      // 3️⃣ Llamar a la IA\n      this.enviar();\n    });\n  }\n\n  enviar() {\n    this.ia.pedir(this.mensaje).subscribe(res => {\n      this.respuesta = res.answer;\n    });\n  }\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}