{"ast":null,"code":"import { Chart } from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/iot.service\";\nconst _c0 = [\"funcion\"];\nexport class GraficoLineaComponent {\n  constructor(iot) {\n    this.iot = iot;\n  }\n  ngAfterViewInit() {\n    this.iot.getPromedioMensual().subscribe(rows => {\n      // eje X → día del mes\n      const datos = rows.map(r => ({\n        x: new Date(r.dia).getDate(),\n        y: r.promedio\n      }));\n      const ctx = this.canvas.nativeElement.getContext('2d');\n      new Chart(ctx, {\n        type: 'line',\n        data: {\n          datasets: [{\n            label: 'Humedad promedio mensual (%)',\n            data: datos,\n            borderColor: 'rgba(86,69,146,0.85)',\n            backgroundColor: 'rgba(86,69,146,0.85)',\n            fill: false,\n            pointRadius: 4,\n            tension: 0\n          }]\n        },\n        options: {\n          scales: {\n            x: {\n              type: 'linear',\n              title: {\n                display: true,\n                text: 'Día del mes'\n              },\n              ticks: {\n                stepSize: 1\n              }\n            },\n            y: {\n              title: {\n                display: true,\n                text: 'Humedad (%)'\n              }\n            }\n          }\n        }\n      });\n    });\n  }\n  static {\n    this.ɵfac = function GraficoLineaComponent_Factory(t) {\n      return new (t || GraficoLineaComponent)(i0.ɵɵdirectiveInject(i1.IotService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: GraficoLineaComponent,\n      selectors: [[\"app-grafico-linea\"]],\n      viewQuery: function GraficoLineaComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n        }\n      },\n      decls: 2,\n      vars: 0,\n      consts: [[\"funcion\", \"\"]],\n      template: function GraficoLineaComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"canvas\", null, 0);\n        }\n      },\n      styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"mappings":"AACA,SAASA,KAAK,QAAQ,eAAe;;;;AAQrC,OAAM,MAAOC,qBAAqB;EAIhCC,YAAoBC,GAAe;IAAf,QAAG,GAAHA,GAAG;EAAe;EAEtCC,eAAe;IAEb,IAAI,CAACD,GAAG,CAACE,kBAAkB,EAAE,CAACC,SAAS,CAACC,IAAI,IAAG;MAE7C;MACA,MAAMC,KAAK,GAAGD,IAAI,CAACE,GAAG,CAACC,CAAC,KAAK;QAC3BC,CAAC,EAAE,IAAIC,IAAI,CAACF,CAAC,CAACG,GAAG,CAAC,CAACC,OAAO,EAAE;QAC5BC,CAAC,EAAEL,CAAC,CAACM;OACN,CAAC,CAAC;MAEH,MAAMC,GAAG,GAAG,IAAI,CAACC,MAAM,CAACC,aAAa,CAACC,UAAU,CAAC,IAAI,CAAC;MAEtD,IAAIpB,KAAK,CAACiB,GAAI,EAAE;QACdI,IAAI,EAAE,MAAM;QACZC,IAAI,EAAE;UACJC,QAAQ,EAAE,CACR;YACEC,KAAK,EAAE,8BAA8B;YACrCF,IAAI,EAAEd,KAAK;YACXiB,WAAW,EAAE,sBAAsB;YACnCC,eAAe,EAAE,sBAAsB;YACvCC,IAAI,EAAE,KAAK;YACXC,WAAW,EAAE,CAAC;YACdC,OAAO,EAAE;WACV;SAEJ;QACDC,OAAO,EAAE;UACPC,MAAM,EAAE;YACNpB,CAAC,EAAE;cACDU,IAAI,EAAE,QAAQ;cACdW,KAAK,EAAE;gBAAEC,OAAO,EAAE,IAAI;gBAAEC,IAAI,EAAE;cAAa,CAAE;cAC7CC,KAAK,EAAE;gBAAEC,QAAQ,EAAE;cAAC;aACrB;YACDrB,CAAC,EAAE;cACDiB,KAAK,EAAE;gBAAEC,OAAO,EAAE,IAAI;gBAAEC,IAAI,EAAE;cAAa;;;;OAIlD,CAAC;IAEJ,CAAC,CAAC;EACJ;;;uBAhDWjC,qBAAqB;IAAA;EAAA;;;YAArBA,qBAAqB;MAAAoC;MAAAC;QAAA;;;;;;;;;;;;;UCTlCC,kCAA0B","names":["Chart","GraficoLineaComponent","constructor","iot","ngAfterViewInit","getPromedioMensual","subscribe","rows","datos","map","r","x","Date","dia","getDate","y","promedio","ctx","canvas","nativeElement","getContext","type","data","datasets","label","borderColor","backgroundColor","fill","pointRadius","tension","options","scales","title","display","text","ticks","stepSize","selectors","viewQuery","i0"],"sourceRoot":"","sources":["C:\\Users\\manav\\Desktop\\Lenguajes\\Python\\RaspberryPi\\humix\\src\\app\\components\\grafico-linea\\grafico-linea.component.ts","C:\\Users\\manav\\Desktop\\Lenguajes\\Python\\RaspberryPi\\humix\\src\\app\\components\\grafico-linea\\grafico-linea.component.html"],"sourcesContent":["import { Component, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\nimport { Chart } from 'chart.js/auto';\nimport { IotService } from 'src/app/services/iot.service';\n\n@Component({\n  selector: 'app-grafico-linea',\n  templateUrl: './grafico-linea.component.html',\n  styleUrls: ['./grafico-linea.component.css']\n})\nexport class GraficoLineaComponent implements AfterViewInit {\n\n  @ViewChild('funcion') canvas!: ElementRef<HTMLCanvasElement>;\n\n  constructor(private iot: IotService) {}\n\n  ngAfterViewInit() {\n\n    this.iot.getPromedioMensual().subscribe(rows => {\n\n      // eje X → día del mes\n      const datos = rows.map(r => ({\n        x: new Date(r.dia).getDate(),\n        y: r.promedio\n      }));\n\n      const ctx = this.canvas.nativeElement.getContext('2d');\n\n      new Chart(ctx!, {\n        type: 'line',\n        data: {\n          datasets: [\n            {\n              label: 'Humedad promedio mensual (%)',\n              data: datos,\n              borderColor: 'rgba(86,69,146,0.85)',\n              backgroundColor: 'rgba(86,69,146,0.85)',\n              fill: false,\n              pointRadius: 4,\n              tension: 0\n            }\n          ]\n        },\n        options: {\n          scales: {\n            x: {\n              type: 'linear',\n              title: { display: true, text: 'Día del mes' },\n              ticks: { stepSize: 1 }\n            },\n            y: {\n              title: { display: true, text: 'Humedad (%)' }\n            }\n          }\n        }\n      });\n\n    });\n  }\n}","<canvas #funcion></canvas>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}