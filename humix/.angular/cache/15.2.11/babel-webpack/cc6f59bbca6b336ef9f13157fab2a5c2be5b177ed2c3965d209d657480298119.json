{"ast":null,"code":"import { Chart } from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/iot.service\";\nconst _c0 = [\"semanal\"];\nexport let GraficoBarrasComponent = /*#__PURE__*/(() => {\n  class GraficoBarrasComponent {\n    constructor(iot) {\n      this.iot = iot;\n    }\n    ngAfterViewInit() {\n      this.iot.getPromedioSemanal().subscribe(rows => {\n        const labels = rows.map(r => new Date(r.dia).toLocaleDateString('es-CL', {\n          weekday: 'short'\n        }));\n        const data = rows.map(r => r.promedio);\n        const ctx = this.canvas.nativeElement.getContext('2d');\n        new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels,\n            datasets: [{\n              label: 'Humedad promedio (%)',\n              data,\n              backgroundColor: 'rgba(86,69,146,0.85)'\n            }]\n          }\n        });\n      });\n    }\n    static {\n      this.ɵfac = function GraficoBarrasComponent_Factory(t) {\n        return new (t || GraficoBarrasComponent)(i0.ɵɵdirectiveInject(i1.IotService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: GraficoBarrasComponent,\n        selectors: [[\"app-grafico-barras\"]],\n        viewQuery: function GraficoBarrasComponent_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.canvas = _t.first);\n          }\n        },\n        decls: 2,\n        vars: 0,\n        consts: [[\"semanal\", \"\"]],\n        template: function GraficoBarrasComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelement(0, \"canvas\", null, 0);\n          }\n        }\n      });\n    }\n  }\n  return GraficoBarrasComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}